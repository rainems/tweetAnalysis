{% extends 'base.html' %}

{% block search %}
Search for tweets or browse Raine's very cool tweets
{% endblock %}

{% block filters %}
    <h1>{{header}}</h1>
	<div class="input-group">
		<input type="text" id="tweetSearchQuery" class="form-control" placeholder="Search for tweets">
		<span class="input-group-btn">
			<button class="btn btn-default" id="tweetSearchBtn" type="button">Go!</button>
		</span>
    </div><!-- /input-group -->
{% endblock %}

{% block data %}
<ul>
    {% if not tweets %}
    No tweets to display. Sad!
    {% endif %}
    {% for t in tweets %}
    <li>
        <p>
            {{ t.text }}
            <br>
            <strong>@{{ t.user.screen_name }}</strong> | <a href="https://www.twitter.com/{{t.user.screen_name}}/status/{{t.id}}">link</a>
            <br> {% if t.entities.urls%}
            <br>
            <i>tweet links</i>
            <ol>
                {% for url in t.entities.urls %}
                <li><a href="{{url.expanded_url}}">{{url.expanded_url}}</a></li>
                {% endfor %}
            </ol>
            {% endif %}
        </p>
    </li>
    {% endfor %}
</ul>

{% endblock %}

{% block footer %}
<script type="text/javascript">
    $(document).ready(function() {
        /* Go to search page when you hit Go */
        $('#tweetSearchBtn').click(function(e) {
            let searchString = $('#tweetSearchQuery').val();
            document.location.href = '/?q=' + searchString;
        });

        /* Also go to search when you press enter in search bar */
		$('#tweetSearchQuery').keypress(function(e) {
			let key = e.which;
            if (key == 13) {  // enter key
				$('#tweetSearchBtn').click();
			}
		});
    });
</script>
{% endblock %}
